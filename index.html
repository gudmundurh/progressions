<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<title>Mandolin Chords</title>
	<link rel="stylesheet" type="text/css" href="chords.css">
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
	<script type="text/javascript" src="scripts/utilities.js"></script>
	<script type="text/javascript" src="scripts/chords.js"></script>
</head>

<body>
  
  <div id="main">
    <div id="chordName"></div>
    
    <canvas id="chordCanvas" width="350" height="150"></canvas>
    
    <a href="#" id="chordUpLink"><span>Up</span></a>
	  <a href="#" id="chordDownLink"><span>Down</span></a>
	</div>	

	<script type="text/javascript">
		var chordTable = [
		  new Chord('C',  '0230'),
		  new Chord('C#', '1341'),
		  new Chord('D',  '2002'),
      new Chord('D#', '0113'),
		  new Chord('E',  '4224'),
		  new Chord('F',  '5301'),
		  new Chord('F#', '6412'),
		  new Chord('G',  '0023'),
		  new Chord('G#', '1134'),
		  new Chord('A',  '6200'),
		  new Chord('A#', '3011'),
		  new Chord('B',  '3356'),
		  new Chord('X', 'xx34'),
		  new Chord('A!', '9745'),
 		  new Chord('Ax', '974x')
		];
		
		$(function() {
		  var currentChordIndex = 0;
		  var renderer = new ChordRenderer(document.getElementById('chordCanvas'));
		  
		  $('#chordUpLink').click(moveUp);
		  $('#chordDownLink').click(moveDown);
		  
		  $(document).bind('keydown', function(e) {
		    if (e.keyCode == 40)
		      moveDown();
		    else if (e.keyCode == 38)
		      moveUp();
		  });
		  
			renderCurrentChord();
		  
		  function moveUp() {
	      currentChordIndex++;
	      currentChordIndex %= chordTable.length;
		    renderCurrentChord();
		  }
		  
		  function moveDown() {
		    currentChordIndex--;
	      if (currentChordIndex < 0)
	        currentChordIndex = chordTable.length - 1;
	      console.log(currentChordIndex)
		    renderCurrentChord();
		  }
		  
		  function renderCurrentChord() {
		    renderer.renderChord(chordTable[currentChordIndex]);
		    $('#chordName').html(chordTable[currentChordIndex].getFormattedName())
		  }
		});
	</script>
</body>
</html>